"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[898],{5898:function(e,n,r){r.r(n),r.d(n,{default:function(){return k}});var s=r(5861),t=r(885),c=r(7757),a=r.n(c),o=r(2791),l=r(9508),i=r(184),d=function(e){return(0,i.jsxs)("div",{className:" balance-box",children:[(0,i.jsx)("h4",{className:"balance-heading",children:"Balance:"}),(0,i.jsx)("span",{className:"balance-value",children:e.amount})]})},u=r(9502),h=r(2671),p=r(6388),m=function(e){return(0,i.jsx)("li",{children:(0,i.jsx)("span",{className:"".concat(e.note&&"note-item"),children:e.note})},e.id)},x=r(8707),j=r(6575),f=r(1297),v=r(1523),g=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}),b=function(e){var n=(0,o.useState)(!1),r=(0,t.Z)(n,2),c=r[0],d=r[1],b=(0,o.useContext)(u.Z),N=(0,l.x)(),_=N.error,y=N.message,Z=N.sendRequest,C=N.clearError,w=N.clearMessage,k=function(){var n=(0,s.Z)(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!1),n.prev=1,n.next=4,Z("".concat("http://localhost:5000/api","/envelopes/").concat(e.envelopeId),"DELETE",null,{Authorization:"Bearer "+b.token});case 4:r=n.sent,console.log(r),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(){return n.apply(this,arguments)}}(),O=function(){d(!1)},E=e.notes.map((function(e){return(0,i.jsx)(m,{note:null===e||void 0===e?void 0:e.note},Math.random())}));return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(h.Z,{error:_,onClose:C}),(0,i.jsx)(p.Z,{message:y,onClose:function(){w("/")}}),(0,i.jsx)(x.Z,{onClose:O,show:c,element:"popup",header:"Confirm to delete",footer:(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(j.Z,{className:"btn-popup btn--inverse",onClick:O,children:"Cancel"}),(0,i.jsx)(j.Z,{className:"btn-popup btn--danger",onClick:k,children:"Delete"})]}),children:(0,i.jsx)("p",{children:"Are you sure? Once deleted, this action cannot be undone!"})}),(0,i.jsx)("div",{className:"envelope__seal--up",children:(0,i.jsx)("div",{className:"envelope-seal"})}),(0,i.jsxs)("div",{className:"envelope__seal--down",children:[(0,i.jsx)("div",{className:"envelope-seal"}),(0,i.jsx)("h4",{className:"envelope__heading ",children:(0,i.jsx)("span",{className:"envelope__heading-span",children:e.category})})]}),(0,i.jsxs)("div",{className:"card__side envelope__side--front",children:[(0,i.jsxs)("div",{className:"card__content",children:[(0,i.jsx)("div",{className:"card__cta",children:(0,i.jsxs)("div",{className:"card__price-box",children:[(0,i.jsx)("p",{className:"card__price-text",children:"Budget"}),(0,i.jsx)("p",{className:"card__category--mobile",children:e.category}),(0,i.jsx)("span",{className:"card__price-value",children:g.format(e.budget)}),(0,i.jsxs)("p",{className:"card__id--mobile",children:["ID: ",e.envelopeId]})]})}),(0,i.jsxs)("div",{className:"card__details",children:[(0,i.jsx)("p",{className:"card__details-header",children:"Note:"}),(0,i.jsx)("ul",{children:E})]}),(0,i.jsx)(v.rU,{to:"/envelopes/".concat(e.envelopeId),children:(0,i.jsx)(j.Z,{className:"btn btn-edit btn--white",onClick:b.showUpdatePage,children:"Edit"})}),(0,i.jsx)(j.Z,{className:"btn-close",onClick:function(){d(!0)},children:(0,i.jsx)(f.Z,{})})]}),(0,i.jsxs)("div",{className:"card__id",children:[(0,i.jsx)("p",{className:"card__id-heading",children:"ID:"}),(0,i.jsx)("span",{className:"card__id-value",children:e.envelopeId})]})]})]})},N=r(1357),_=function(e){return(0,i.jsx)(o.Fragment,{children:(0,i.jsx)("li",{children:(0,i.jsx)(N.Z,{children:(0,i.jsx)(b,{category:e.category,budget:e.budget,notes:e.notes,envelopeId:e.id})})},e.id)})},y=function(){return(0,i.jsx)("ion-icon",{class:"icon-add",name:"add-outline"})},Z=r(4255),C=function(e){var n=(0,o.useContext)(u.Z),r=e.envelopes.map((function(e){return(0,i.jsx)(_,{id:e.envelopeId,category:e.category,budget:e.budget,notes:e.notes},e.envelopeId)}));return(0,i.jsx)(o.Fragment,{children:(0,i.jsxs)("ul",{className:"env-list flex-box center medium-gap",children:[e.isLoading&&(0,i.jsx)(Z.Z,{asOverlay:!0}),!e.isLoading&&0===e.envelopes.length&&(0,i.jsx)("h2",{className:"warning",children:"No envelopes found. Create a new envelope"}),!e.isLoading&&0!=e.envelopes.length&&r,!e.isLoading&&(0,i.jsx)("div",{className:"btn-container",children:(0,i.jsx)(j.Z,{className:"btn btn-add",type:"submit",onClick:n.showNewEnvelope,children:(0,i.jsx)(y,{})})})]})})},w=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}),k=function(e){var n=(0,o.useContext)(u.Z),r=(0,l.x)(),c=r.isLoading,p=r.error,m=r.sendRequest,x=r.clearError,j=(0,o.useState)([]),f=(0,t.Z)(j,2),v=f[0],g=f[1],b=(0,o.useState)(),N=(0,t.Z)(b,2),_=N[0],y=N[1];return(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)(a().mark((function e(){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("".concat("http://localhost:5000/api","/envelopes"),"GET",null,{Authorization:"Bearer "+n.token});case 3:return r=e.sent,e.next=6,m("".concat("http://localhost:5000/api","/users/me"),"GET",null,{Authorization:"Bearer "+n.token});case 6:s=e.sent,g(r.envelopes),y(w.format(s.user.balance)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[m,n.token]),(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(h.Z,{error:p,onClose:x}),(0,i.jsx)("section",{className:"section-envelopes ",children:(0,i.jsxs)("div",{className:"flex-box center medium-gap",children:[(0,i.jsx)(d,{amount:_}),(0,i.jsx)(C,{envelopes:v,isLoading:c})]})})]})}},1357:function(e,n,r){r.d(n,{Z:function(){return t}});var s=r(184),t=function(e){return(0,s.jsx)("div",{className:"card",style:{width:e.width,height:e.height},children:e.children})}},2671:function(e,n,r){r(2791);var s=r(8707),t=r(6575),c=r(184);n.Z=function(e){return(0,c.jsx)(s.Z,{element:"popup",onClose:e.onClose,header:"An Error Occurred!",show:!!e.error,footer:(0,c.jsx)(t.Z,{onClick:e.onClose,className:"btn-popup btn--danger",children:"Okay"}),children:(0,c.jsx)("p",{children:e.error})})}},6388:function(e,n,r){r(2791);var s=r(8707),t=r(6575),c=r(184);n.Z=function(e){return(0,c.jsx)(s.Z,{element:"popup",onClose:e.onClose,header:"Message",headerClass:"msg-header",show:!!e.message,footer:(0,c.jsx)(t.Z,{onClick:e.onClose,className:"btn-popup btn--sucess",children:"Okay"}),children:(0,c.jsx)("p",{children:e.message})})}},8707:function(e,n,r){r.d(n,{Z:function(){return d}});var s=r(1413),t=r(885),c=r(2791),a=r(4164),o=r(184),l=function(e){return a.createPortal((0,o.jsx)("div",{className:"backdrop",onClick:e.onClose}),document.getElementById("backdrop-hook"))},i=function(e){var n;if("popup"===e.element)n=(0,o.jsxs)("div",{className:"modal popup ".concat(e.className," ").concat(!e.show&&"popup-hidden"),style:e.style,children:[(0,o.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:(0,o.jsx)("h2",{children:e.header||"Warning"})}),(0,o.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[(0,o.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),(0,o.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});else n=(0,o.jsx)("div",{className:"modal ".concat(!e.show&&"popup-hidden"," ").concat(e.className),style:e.style,children:e.children});return a.createPortal(n,document.getElementById("modal-hook"))},d=function(e){var n=(0,c.useState)(!1),r=(0,t.Z)(n,2),a=r[0],d=r[1];return(0,c.useEffect)((function(){var n;return e.show?d(!0):n=setTimeout((function(){d(!1)}),350),function(){clearTimeout(n)}}),[e.show]),(0,o.jsxs)(c.Fragment,{children:[e.show&&(0,o.jsx)(l,{onClose:e.onClose}),a&&(0,o.jsx)(i,(0,s.Z)((0,s.Z)({},e),{},{children:e.children}))]})}},4942:function(e,n,r){function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}r.d(n,{Z:function(){return s}})},1413:function(e,n,r){r.d(n,{Z:function(){return c}});var s=r(4942);function t(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,s)}return r}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(n){(0,s.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}}}]);
//# sourceMappingURL=898.0541ba8d.chunk.js.map